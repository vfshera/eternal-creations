---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
import Preloader from "../components/Preloader.astro";
import ScrollingText from "../components/ScrollingText.astro";
import Footer from "../components/Footer.astro";
---

<Layout>
  <Navigation />
  <Preloader />
  <div data-scroll-container class="overflow-hidden isolate">
    <div class="relative h-screen lg:h-[110vh] overflow-hidden">
      <div
        data-scroll
        data-scroll-speed="-2"
        class="absolute inset-0 lg:top-[auto] justify-center lg:justify-start lg:bottom-0 py-24 lg:py-48 flex items-center text-center flex-col gap-3 sm:gap-8 mx-auto z-30 lg:h-fit w-full"
      >
        <h1 class="text-4xl md:text-5xl lg:text-8xl font-black">
          <span class="block opacity-80">creations for eternity.</span>
        </h1>
      </div>
      <div
        class="absolute inset-0 w-full h-full bg-gradient-to-b from-[rgba(166,81,255,0.5)] to-[#9E42FF] z-20"
      >
      </div>
      <div
        class="absolute inset-0 w-full h-full bg-gradient-to-b from-[rgba(0,81,0,0)] to-[#000] z-10"
      >
      </div>
      <div class="relative h-full w-full z-0">
        <video
          autoplay
          muted
          loop
          class="w-full h-full brightness-75 object-cover"
        >
          <source src="/video/video1.webm" type="video/webm" />
        </video>
      </div>
    </div>

    <div class="relative z-30">
      <div
        class="px-5 pb-8 lg:px-8 pt-16 sm:pt-28 lg:pt-32 lg:pb-20 max-w-[120rem] mx-auto flex flex-col gap-10 sm:gap-14"
      >
        <h1
          class="text-3xl sm:text-2xl md:text-4xl lg:text-6xl font-black uppercase"
        >
          <span class="">we are</span><br />
          <span class="text-[#9C44FC]">ETERNAL CREATIONS</span>
        </h1>
        <div class="flex flex-col gap-5 sm:flex-row">
          <div class="w-full sm:w-1/2 pb-10">
            <div
              class="h-[250px] sm:h-full rounded-xl w-full text-xl text-[#9C44FC]/60 grid place-content-center"
            >
              <img
                alt=""
                src="/img/eternal3dv1.webp"
                class="w-full h-full object-left rounded-xl"
              />
            </div>
          </div>

          <div
            class="flex flex-col justify-end sm:mx-4 gap-8 sm:gap-6 lg:gap-14 pb-5 lg:mx-32 w-full sm:w-1/2"
          >
            <div class="flex items-start max-w-[80rem] h-[200px]">
              <p class="leading-2 lg:text-3xl lg:leading-[1.55]">
                We are a global team of Minecraft creators.<br /> Founded in 2019,
                we're dedicated to producing <br /> high-quality, immersive content,
                reimagining gaming experiences and shaping the future of Minecraft.
              </p>
            </div>

            <a
              href="/work"
              class="block w-fit group relative overflow-hidden text-white leading-[1.4] rounded-full border-2 border-gray-400 border-solid py-3 lg:py-4 px-6 lg:px-8 hover:border-[#9C44FC] text-left"
              style="transition: border .3s ease .05s;"
            >
              <span class="relative text-xl lg:text-[2rem] z-10"
                >More About Us</span
              >
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="relative z-30">
      <div
        class="px-5 pb-8 lg:px-8 pt-16 sm:pt-28 lg:pt-32 lg:pb-20 max-w-[120rem] mx-auto flex flex-col gap-10 sm:gap-14"
      >
        <h1
          class="text-3xl sm:text-3xl md:text-4xl lg:text-6xl font-black uppercase"
        >
          <span class="block">bringing ideas</span>
          <span class="text-[#9C44FC]">to life</span>
        </h1>
        <div class="flex items-start max-w-[80rem]">
          <p
            class="text-xl md:text-1xl leading-9 lg:text-3xl lg:leading-[1.55] pl-5 md:pl-10 border-l-2 md:border-l-4 py-1 md:py-2 md:ml-12 lg:ml-20"
          >
            Transforming visions into engaging, immersive realities. Harnessing
            our diverse skills and shared passion, we're committed to delivering
            unique Minecraft experiences that captivate and inspire.
          </p>
        </div>
        <div class="grid grid-cols-1 gap-10 sm:grid-cols-2">
          <div class="aspect-video">
            <img
              alt=""
              src="/img/render1.webp"
              class="w-full h-full object-left rounded-xl"
            />
          </div>

          <div class="flex flex-col sm:mx-4 gap-5 pt-2">
            <div
              class="text-4xl sm:text-3xl md:text-3xl lg:text-3xl font-bold uppercase text-white/90"
            >
              <span class="block text-5xl text-[#9C44FC]">3</span>
              Years
            </div>
            <div
              class="text-4xl sm:text-3xl md:text-3xl lg:text-3xl font-bold uppercase text-white/90"
            >
              <span class="block text-5xl text-[#9C44FC]">7</span>
              Projects
            </div>
            <div
              class="text-4xl sm:text-3xl md:text-3xl lg:text-3xl font-bold uppercase text-white/90"
            >
              <span class="block text-5xl text-[#9C44FC]">150.000+</span>
              Downloaded Games
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="horizontal-scroll overflow-hidden left-0 max-w-[120rem] pt-5 sm:pt-24 mx-auto"
    >
      <div
        class="flex items-center mb-16 sm:pb-20 lg:pb-[200px] px-5 sm:pl-5 lg:pl-8"
      >
        <div
          class="pin-wrapper pt-8 grid grid-cols-1 sm:grid-cols-[repeat(5,550px)] lg:grid-cols-[repeat(5,700px)] gap-10"
        >
          <div class="flex flex-col">
            <h1
              class="text-3xl sm:text-2xl md:text-4xl lg:text-6xl font-black uppercase"
            >
              <span class="block">some of</span>
              <span class="block mt-2 text-[#9C44FC]">our work</span>
            </h1>
            <div class="text-left">
              <p
                class="text-3xl lg:text-3x1 lg:leading-tight mt-8 mb-10 lg:my-16 max-w-[95%] lg:max-w-[80rem]"
              >
                <span class="block"
                  >Crafting extraordinary worlds is our passion.</span
                >
                <span class="block">
                  Explore a selection of our personal favorites.</span
                >
              </p>
              <a
                href="/projects"
                class="block my-6 w-fit btn large group relative overflow-hidden text-white leading-[1.4] rounded-full border-2 border-gray-400 border-solid py-4 px-8 hover:border-[#9C44FC]"
                style="transition: border .3s ease .05s;"
              >
                <span class="relative text-xl sm:text-[1.85rem] z-10"
                  >Explore All Our Games</span
                >
              </a>
            </div>
          </div>
          <a
            href="/projectztd"
            class="flex flex-col justify-center w-full h-full hoverable hover:text-purple-500"
            aria-label="View"
          >
            <div class="w-full h-full mb-3 sm:mb-6 hover:scale-105">
              <img
                alt=""
                src="/img/zombie_tower_defense_keyart.webp"
                class="w-full h-ful object-left"
              />
            </div>
            <div class="w-auto">
              <h3 class="text-2xl sm:text-[2.25rem]">Zombie Tower Defense</h3>
              <p class="sm:pt-3 text-lg sm:text-[1.2rem] opacity-60">
                Strategic Survival in the Undead Uprising.
              </p>
            </div>
          </a>

          <a
            href="/projectrr"
            class="flex flex-col justify-center w-full h-full hover:text-purple-500"
          >
            <div class="w-full h-full mb-3 sm:mb-6 hover:scale-105">
              <img
                alt=""
                src="/img/room_rush_keyart.webp"
                class="w-full h-ful object-left"
              />
            </div>
            <div class="w-auto">
              <h3 class="text-2xl sm:text-[2.25rem]">Room Rush</h3>
              <p class="sm:pt-3 text-lg sm:text-[1.2rem] opacity-60">
                Boundless Dimensions, Endless Adventures.
              </p>
            </div>
          </a>

          <a
            href="/projectpu"
            class="flex flex-col justify-center w-full h-full hover:text-purple-500"
          >
            <div class="w-full h-full mb-3 sm:mb-6 hover:scale-105">
              <img
                alt=""
                src="/img/portal_unlimited_render_2.webp"
                class="w-full h-ful object-left"
              />
            </div>
            <div class="w-auto">
              <h3 class="text-2xl sm:text-[2.25rem]">Portal Unlimited</h3>
              <p class="sm:pt-3 text-lg sm:text-[1.2rem] opacity-60">
                Evade the Darkness in a Thrilling Escape Adventure.
              </p>
            </div>
          </a>
          <a
            href="/work"
            class="flex flex-col justify-center w-full h-full pr-24"
          >
            <div
              class="w-full h-[218px] sm:h-[390px] mb-3 sm:mb-6 hover:scale-105"
            >
              <div
                class="bg-[#9C44FC] w-full h-full flex justify-center items-center"
              >
                <p class="text-5xl sm:text-[4.25rem] uppercase font-black">
                  All Games
                </p>
              </div>
            </div>
            <div class="w-auto">
              <h3 class="text-2xl sm:text-[2.25rem]">
                <span class="hover:text-purple-500">Want more games?</span>
              </h3>
              <p
                class="sm:pt-3 text-lg sm:text-[1.2rem] hover:text-purple-500 opacity-60"
              >
                Check all of them here.
              </p>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="mt-6"></div>
    <ScrollingText />
    <Footer />
  </div>
</Layout>

<style>
  .projects > a:hover video,
  .projects > a:hover p,
  .projects > a:hover img {
    opacity: 1;
  }
</style>

<script>
  import LocomotiveScroll from "locomotive-scroll";

  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("load", function () {
    const pageContainer = document.querySelector(
      "[data-scroll-container]"
    ) as HTMLElement;

    const scroller = new LocomotiveScroll({
      el: pageContainer,
      smooth: true,
      getDirection: true,
    });

    // get head component
    const header = document.querySelector("#nav-header") as HTMLDivElement;
    // navigation wrapper
    const navWrapper = document.querySelector(
      "#navigation-wrapper"
    ) as HTMLDivElement;

    scroller.on("scroll", (t) => {
      document.documentElement.setAttribute("data-direction", t.direction);

      ScrollTrigger.update();

      // check if the navigation is open
      const navOpen = navWrapper.dataset.open === "true";
      //   // add background when scrolled > 300px and navigation is closed
      header.dataset.showBg = `${t.scroll.y > 300 && !navOpen}`;
    });

    // scroller.on("scroll", ScrollTrigger.update);

    ScrollTrigger.scrollerProxy(pageContainer, {
      scrollTop(value) {
        return arguments.length
          ? scroller.scrollTo(value, 0, 0)
          : scroller.scroll.instance.scroll.y;
      },
      getBoundingClientRect() {
        return {
          left: 0,
          top: 0,
          width: window.innerWidth,
          height: window.innerHeight,
        };
      },
      pinType: pageContainer.style.transform ? "transform" : "fixed",
    });

    // Pinning and horizontal scrolling

    let horizontalSections = document.querySelectorAll(".horizontal-scroll");

    horizontalSections.forEach((horizontalSection) => {
      let pinWrapper = horizontalSection.querySelector(".pin-wrapper");
      let pinWrapperWidth = pinWrapper.offsetWidth;
      let horizontalScrollLength = pinWrapperWidth - window.innerWidth;

      if (window.innerWidth >= 768) {
        // to scroll horizontal on tablets and above
        gsap.to(pinWrapper, {
          scrollTrigger: {
            scroller: pageContainer,
            scrub: true,
            trigger: horizontalSection,
            pin: true,
            start: "top top",
            end: () => `+=${pinWrapperWidth}`,
            invalidateOnRefresh: true,
          },
          x: -horizontalScrollLength,
          ease: "none",
        });
      }
    });

    ScrollTrigger.addEventListener("refresh", () => scroller.update());

    ScrollTrigger.refresh();
  });
</script>
